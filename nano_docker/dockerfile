FROM ubuntu:22.04

RUN apt update && apt install  openssh-server sudo curl vim git zsh -y
RUN useradd -rm -d /home/ubuntu -s /usr/bin/zsh -g root -G sudo -u 1000 ubuntu
RUN echo 'ubuntu:adminAb1' | chpasswd

USER ubuntu
RUN sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"

USER root
RUN service ssh start
EXPOSE 22
CMD ["/usr/sbin/sshd","-D"]

# ssh admin@localhost -p 4022
# TODO: find why to install oh-my-zsh